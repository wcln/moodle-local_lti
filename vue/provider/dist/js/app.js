(function(e){function t(t){for(var a,i,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/local/lti/vue/provider/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0e1e":function(e,t,r){"use strict";r("3cda")},"2fd3":function(e,t,r){},"3cda":function(e,t,r){},5171:function(e,t,r){"use strict";r("569b")},"569b":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("a026"),n=r("8c4f"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card",attrs:{id:"rendered-resource"}},[e.displayError?r("Error",{attrs:{code:e.error.code,message:e.error.message,"return-url":e.returnUrl}}):r("Resource",{attrs:{token:e.token,"return-url":e.returnUrl},on:{error:e.handleError,updated:e.resizeIframe}})],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"has-text-left"},[r("Navbar",{key:e.navBarKey,attrs:{title:e.title,pages:e.pages,"current-page":e.currentPage,"return-url":e.returnUrl},on:{pageChanged:e.changePage,print:e.print}}),r("div",{staticClass:"card-content",attrs:{id:"rendered-resource"}},[r("transition",{attrs:{name:"fade"}},[e.resource_content&&!e.loading?r("div",{staticClass:"content",attrs:{id:"lti-content"}},[e._v("test")]):e._e()]),r("transition",{attrs:{name:"fade"}},[e.loading?r("Loading"):e._e()],1)],1),void 0!==e.pages&&e.pages.length>0?r("Footer",{attrs:{pages:e.pages,"current-page":e.currentPage}}):e._e()],1)},c=[],u=r("5530"),l=(r("d3b7"),r("bc3a")),d=r.n(l),p="/lib/ajax/service-nologin.php",f=function(e,t,r){return new Promise((function(a,n){d.a.get(p,{params:{args:JSON.stringify([{methodname:e,args:Object(u["a"])({token:t},r)}])}}).then((function(e){void 0!==e.data[0].data&&e.data[0].data.error?n(e.data[0].data.error):e.data.error?(console.error(e.data.exception),n({code:"E000",message:e.data.exception.message})):e.data[0].error&&(console.error(e.data[0].exception),n({code:"E000",message:e.data[0].exception.message})),a(e.data[0].data)}))}))},g={data:function(){return{webserviceUrl:p}},methods:{moodleAjax:f}},h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar is-info",attrs:{role:"navigation","aria-label":"main navigation"}},[r("div",{staticClass:"navbar-brand"},[e._m(0),r("h1",{staticClass:"navbar-item"},[e._v(" "+e._s(e.title)+" ")]),r("a",{class:{"navbar-burger":!0,"is-active":e.showMenu},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"resourceNavbar"},on:{click:function(t){e.showMenu=!e.showMenu}}},[r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}})])]),r("div",{class:{"navbar-menu":!0,"is-active":e.showMenu},attrs:{id:"resourceNavbar"}},[r("div",{staticClass:"navbar-end"},[!e.hasPages||e.isFirstPage||e.showMenu?e._e():r("div",{staticClass:"navbar-item"},[r("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("pageChanged",e.currentPage-1)}}},[r("i",{staticClass:"fa fa-angle-left fa-2x"})])]),e.hasPages?r("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[r("a",{staticClass:"navbar-link"},[e._v(" Table of Contents ")]),r("div",{staticClass:"navbar-dropdown is-right"},[e._l(e.pages,(function(t,a){return r("a",{key:a,class:{"navbar-item":!0,"is-active":a===e.currentPage-1},on:{click:function(r){return e.$emit("pageChanged",t.pagenum)}}},[e._v(" "+e._s(t.name)+" ")])})),r("hr",{staticClass:"navbar-divider"}),r("a",{staticClass:"navbar-item",on:{click:function(t){return e.$emit("print")}}},[e._m(1)])],2)]):e._e(),!e.hasPages||e.isLastPage||e.showMenu?e._e():r("div",{staticClass:"navbar-item"},[r("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("pageChanged",e.currentPage+1)}}},[r("i",{staticClass:"fa fa-angle-right fa-2x"})])]),e.hasPages||e.error?e._e():r("div",{staticClass:"navbar-item"},[r("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("print")}}},[r("i",{staticClass:"fa fa-print"})])])])])])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[a("img",{attrs:{src:r("cf05"),height:"28",alt:"WCLN logo"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon-text"},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-print"})]),r("span",[e._v("Print")])])}],v={name:"Navbar",props:["title","pages","currentPage","error"],data:function(){return{showMenu:!1}},computed:{isLastPage:function(){return this.currentPage===this.pages.length},isFirstPage:function(){return 1===this.currentPage},hasPages:function(){return null!==this.pages&&this.pages.length>0}}},b=v,_=(r("6cee"),r("2877")),C=Object(_["a"])(b,h,m,!1,null,"6329bf83",null),P=C.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loader"})},x=[],y={name:"Loading"},j=y,O=(r("5171"),Object(_["a"])(j,w,x,!1,null,"0cddc666",null)),k=O.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",[r("Pagination",{attrs:{itemsTotal:e.pages.length,itemsPerPage:1,currentPage:e.currentPage,buttonsMax:5,url:"app"}})],1)},$=[],M=r("3eae"),N=r.n(M),T={name:"Footer",components:{Pagination:N.a},props:["pages","currentPage"]},S=T,U=(r("ef8d"),Object(_["a"])(S,E,$,!1,null,"4c3f920a",null)),B=U.exports,J=r("1157"),L=r.n(J),A={name:"Resource",components:{Footer:B,Loading:k,Navbar:P},props:["token","returnUrl"],mixins:[g],data:function(){return{resource_content:null,title:"",loading:!0,pages:[],currentPage:1,navBarKey:0}},methods:{loadContent:function(e){var t=this;this.moodleAjax("local_lti_get_content",this.token,{pagenum:e}).then((function(r){t.resource_content=r.raw_content,t.title=r.title,t.pages=r.pages,t.currentPage=e,t.navBarKey+=1,t.loading=!1,a["a"].nextTick((function(){L()("#lti-content").html(t.resource_content),t.$emit("updated")}))})).catch((function(e){window.console.error(e),t.$emit("error",e)}))},changePage:function(e){this.loading=!0,this.loadContent(e)},print:function(){window.print()}},mounted:function(){this.loadContent(this.currentPage)},watch:{$route:function(){void 0!==this.$route.query.page&&this.changePage(this.$route.query.page)}}},F=A,I=(r("0e1e"),Object(_["a"])(F,o,c,!1,null,"1cd9350d",null)),R=I.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Navbar",{attrs:{title:"Error",pages:[],error:!0}}),r("div",{staticClass:"columns is-centered"},[r("div",{staticClass:"column is-half-desktop"},[r("article",{staticClass:"message is-danger mt-3"},[e._m(0),r("div",{staticClass:"message-body"},[r("p",{staticClass:"mb-2"},[e._v(e._s(e.message))]),r("p"),e._m(1),null!==e.code?r("p",[r("b",[e._v("Error code:")]),e._v(" "+e._s(e.code))]):r("p",[r("b",[e._v("Unknown error code")])])])])])])],1)},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"message-header"},[r("span",{staticClass:"icon-text"},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-exclamation-triangle"})]),r("span",[e._v("An error occurred")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("i",[e._v("Contact a course administrator, teacher or wcln.ca to fix this issue.")])])}],K={name:"Error",components:{Navbar:P},props:["code","message"]},H=K,W=(r("e6bd"),Object(_["a"])(H,q,z,!1,null,"02955d90",null)),D=W.exports,G={methods:{resizeIframe:function(){var e=document.querySelector("#rendered-resource").offsetHeight;window.parent.postMessage(JSON.stringify({subject:"lti.frameResize",height:e+100}),"*"),this.scrollToTop()},scrollToTop:function(){window.parent.postMessage(JSON.stringify({subject:"lti.scrollToTop"}),"*")},removeIframeBorder:function(){window.parent.postMessage(JSON.stringify({subject:"lti.removeBorder"}),"*")}}},Q={name:"App",components:{Error:D,Resource:R},mixins:[G],props:["token","returnUrl","errorCode","errorMessage"],computed:{displayError:function(){return""!==this.error.code||""!==this.error.message}},data:function(){return{error:{code:null,message:null}}},methods:{handleError:function(e){this.error=e}},mounted:function(){this.error.code=this.errorCode,this.error.message=this.errorMessage,this.removeIframeBorder()}},V=Q,X=(r("5c0b"),Object(_["a"])(V,s,i,!1,null,null,null)),Y=X.exports;r("b107"),r("7051");a["a"].config.productionTip=!1,a["a"].use(n["a"]);var Z=new n["a"]({routes:[{path:"/:page?",component:Y,name:"app"}]});new a["a"]({el:"#app",components:{App:Y},router:Z})},"5c0b":function(e,t,r){"use strict";r("9c0c")},"6cee":function(e,t,r){"use strict";r("7501")},7501:function(e,t,r){},"9c0c":function(e,t,r){},b107:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.png"},d31a:function(e,t,r){},e6bd:function(e,t,r){"use strict";r("d31a")},ef8d:function(e,t,r){"use strict";r("2fd3")}});
//# sourceMappingURL=app.js.map