(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/local/lti/vue/provider/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"03a7":function(e,t,a){"use strict";a("9098")},"0e1e":function(e,t,a){"use strict";a("3cda")},"2fd3":function(e,t,a){},"3cda":function(e,t,a){},"423e":function(e,t,a){"use strict";a("68a7")},5171:function(e,t,a){"use strict";a("569b")},"569b":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("a026"),n=a("8c4f"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card",attrs:{id:"rendered-resource"}},[e.displayError?a("Error",{attrs:{code:e.error.code,message:e.error.message,"return-url":e.returnUrl}}):a("Resource",{attrs:{token:e.token,"return-url":e.returnUrl},on:{error:e.handleError,updated:e.resizeIframe}})],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"has-text-left"},[a("Navbar",{key:e.navBarKey,attrs:{title:e.title,pages:e.pages,"current-page":e.currentPage,"return-url":e.returnUrl},on:{pageChanged:e.changePage,print:e.print}}),a("div",{staticClass:"card-content",attrs:{id:"rendered-resource"}},[a("transition",{attrs:{name:"fade"}},[e.resource_content&&!e.loading?a("div",{staticClass:"content",attrs:{id:"lti-content"}},[e._v("test")]):e._e()]),a("transition",{attrs:{name:"fade"}},[e.loading?a("Loading"):e._e()],1)],1),void 0!==e.pages&&e.pages.length>0?a("Footer",{attrs:{pages:e.pages,"current-page":e.currentPage}}):e._e()],1)},c=[],l=a("5530"),u=(a("d3b7"),a("bc3a")),d=a.n(u),p="/lib/ajax/service-nologin.php",f=function(e,t,a){return new Promise((function(r,n){d.a.get(p,{params:{args:JSON.stringify([{methodname:e,args:Object(l["a"])({token:t},a)}])}}).then((function(e){void 0!==e.data[0].data&&e.data[0].data.error?n(e.data[0].data.error):e.data.error?(console.error(e.data.exception),n({code:"E000",message:e.data.exception.message})):e.data[0].error&&(console.error(e.data[0].exception),n({code:"E000",message:e.data[0].exception.message})),r(e.data[0].data)}))}))},g={data:function(){return{webserviceUrl:p}},methods:{moodleAjax:f}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar is-info",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[e._m(0),a("h1",{staticClass:"navbar-item"},[e._v(" "+e._s(e.title)+" ")]),a("a",{class:{"navbar-burger":!0,"is-active":e.showMenu},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"resourceNavbar"},on:{click:function(t){e.showMenu=!e.showMenu}}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])]),a("div",{class:{"navbar-menu":!0,"is-active":e.showMenu},attrs:{id:"resourceNavbar"}},[a("div",{staticClass:"navbar-end"},[!e.hasPages||e.isFirstPage||e.showMenu?e._e():a("div",{staticClass:"navbar-item"},[a("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("pageChanged",e.currentPage-1)}}},[a("i",{staticClass:"fa fa-angle-left fa-2x"})])]),e.hasPages?a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[a("a",{staticClass:"navbar-link"},[e._v(" Table of Contents ")]),a("div",{staticClass:"navbar-dropdown is-right"},[e._l(e.pages,(function(t,r){return a("a",{key:r,class:{"navbar-item":!0,"is-active":r===e.currentPage-1},on:{click:function(a){return e.$emit("pageChanged",t.pagenum)}}},[e._v(" "+e._s(t.name)+" ")])})),a("hr",{staticClass:"navbar-divider"}),a("a",{staticClass:"navbar-item",on:{click:function(t){return e.$emit("print")}}},[e._m(1)]),a("a",{staticClass:"navbar-item",attrs:{href:e.returnUrl}},[e._m(2)])],2)]):e._e(),!e.hasPages||e.isLastPage||e.showMenu?e._e():a("div",{staticClass:"navbar-item"},[a("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("pageChanged",e.currentPage+1)}}},[a("i",{staticClass:"fa fa-angle-right fa-2x"})])]),e.hasPages||e.error?e._e():a("div",{staticClass:"navbar-item"},[a("a",{staticClass:"has-text-light",on:{click:function(t){return e.$emit("print")}}},[a("i",{staticClass:"fa fa-print"})])]),e.hasPages&&e.isLastPage||!e.hasPages&&e.returnUrl?a("div",{staticClass:"navbar-item"},[a("a",{staticClass:"has-text-light",attrs:{href:e.returnUrl}},[a("i",{staticClass:"fa fa-sign-out-alt"})])]):e._e()])])])},m=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[r("img",{attrs:{src:a("cf05"),height:"28",alt:"WCLN logo"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"icon-text"},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-print"})]),a("span",[e._v("Print")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"icon-text"},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})]),a("span",[e._v("Return to course")])])}],v={name:"Navbar",props:["title","pages","currentPage","returnUrl","error"],data:function(){return{showMenu:!1}},computed:{isLastPage:function(){return this.currentPage===this.pages.length},isFirstPage:function(){return 1===this.currentPage},hasPages:function(){return null!==this.pages&&this.pages.length>0}}},b=v,_=(a("423e"),a("2877")),C=Object(_["a"])(b,h,m,!1,null,"789fc390",null),P=C.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loader"})},x=[],y={name:"Loading"},j=y,E=(a("5171"),Object(_["a"])(j,w,x,!1,null,"0cddc666",null)),O=E.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",[a("Pagination",{attrs:{itemsTotal:e.pages.length,itemsPerPage:1,currentPage:e.currentPage,buttonsMax:5,url:"app"}})],1)},$=[],M=a("3eae"),U=a.n(M),N={name:"Footer",components:{Pagination:U.a},props:["pages","currentPage"]},T=N,S=(a("ef8d"),Object(_["a"])(T,k,$,!1,null,"4c3f920a",null)),L=S.exports,B=a("1157"),J=a.n(B),A={name:"Resource",components:{Footer:L,Loading:O,Navbar:P},props:["token","returnUrl"],mixins:[g],data:function(){return{resource_content:null,title:"",loading:!0,pages:[],currentPage:1,navBarKey:0}},methods:{loadContent:function(e){var t=this;this.moodleAjax("local_lti_get_content",this.token,{pagenum:e}).then((function(a){t.resource_content=a.raw_content,t.title=a.title,t.pages=a.pages,t.currentPage=e,t.navBarKey+=1,t.loading=!1,r["a"].nextTick((function(){J()("#lti-content").html(t.resource_content),t.$emit("updated")}))})).catch((function(e){window.console.error(e),t.$emit("error",e)}))},changePage:function(e){this.loading=!0,this.loadContent(e)},print:function(){window.print()}},mounted:function(){this.loadContent(this.currentPage)},watch:{$route:function(){void 0!==this.$route.query.page&&this.changePage(this.$route.query.page)}}},F=A,R=(a("0e1e"),Object(_["a"])(F,o,c,!1,null,"1cd9350d",null)),I=R.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Navbar",{attrs:{title:"Error","return-url":e.returnUrl,pages:[],error:!0}}),a("div",{staticClass:"columns is-centered"},[a("div",{staticClass:"column is-half-desktop"},[a("article",{staticClass:"message is-danger mt-3"},[e._m(0),a("div",{staticClass:"message-body"},[a("p",{staticClass:"mb-2"},[e._v(e._s(e.message))]),a("p"),e._m(1),null!==e.code?a("p",[a("b",[e._v("Error code:")]),e._v(" "+e._s(e.code))]):a("p",[a("b",[e._v("Unknown error code")])])])])])])],1)},z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-header"},[a("span",{staticClass:"icon-text"},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-exclamation-triangle"})]),a("span",[e._v("An error occurred")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("i",[e._v("Contact a course administrator, teacher or wcln.ca to fix this issue.")])])}],K={name:"Error",components:{Navbar:P},props:["code","message","returnUrl"]},H=K,W=(a("03a7"),Object(_["a"])(H,q,z,!1,null,"8e51a902",null)),D=W.exports,G={methods:{resizeIframe:function(){var e=document.querySelector("#rendered-resource").offsetHeight;window.parent.postMessage(JSON.stringify({subject:"lti.frameResize",height:e+100}),"*"),this.scrollToTop()},scrollToTop:function(){window.parent.postMessage(JSON.stringify({subject:"lti.scrollToTop"}),"*")},removeIframeBorder:function(){window.parent.postMessage(JSON.stringify({subject:"lti.removeBorder"}),"*")}}},Q={name:"App",components:{Error:D,Resource:I},mixins:[G],props:["token","returnUrl","errorCode","errorMessage"],computed:{displayError:function(){return""!==this.error.code||""!==this.error.message}},data:function(){return{error:{code:null,message:null}}},methods:{handleError:function(e){this.error=e}},mounted:function(){this.error.code=this.errorCode,this.error.message=this.errorMessage,this.removeIframeBorder()}},V=Q,X=(a("5c0b"),Object(_["a"])(V,s,i,!1,null,null,null)),Y=X.exports;a("b107"),a("7051");r["a"].config.productionTip=!1,r["a"].use(n["a"]);var Z=new n["a"]({routes:[{path:"/:page?",component:Y,name:"app"}]});new r["a"]({el:"#app",components:{App:Y},router:Z})},"5c0b":function(e,t,a){"use strict";a("9c0c")},"68a7":function(e,t,a){},9098:function(e,t,a){},"9c0c":function(e,t,a){},b107:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.png"},ef8d:function(e,t,a){"use strict";a("2fd3")}});
//# sourceMappingURL=app.js.map